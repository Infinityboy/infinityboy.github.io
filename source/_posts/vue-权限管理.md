---
title: vue 权限管理
date: 2019-06-01 21:21:55
tags: vue
categories: 
- web前端
---

>本篇博客仅以个人学习记录使用
>参照开源项目地址：https://github.com/zhangdaiscott/jeecg-boot

### 产生背景

首先，权限管理并不是随着vue或者react或者angular等技术出现才产生的。早期的web是十分简单的，随着互联网的发展，人们越来越多的使用互联网，使用web作为系统管理，web需求变得越来越复杂，当一个系统需要区分不同的账号，不同的角色，分别有不同的操作使用权限和查看权限的时候，就需要做权限管理，简单的举例说就是区分识别普通用户和vip用户(人命币玩家)。

### 权限种类

权限控制大体上分为单账号->单角色/单账号->多角色。单账号单角色更简单一些只需要使用账号就可以区分开，单账号多角色还需要针对该账号存在的不同角色再去做区分匹配。同时对于权限控制在页面上也会有更加细粒度的控制，除了浏览权限之外，还有按钮控制权限，还有数据权限。当然权限最大的还是超级管理员，这个人可以肆意妄为。。。

### 区别

随着单页应用和前后端分离，权限管理的实现方式出现了一些变化，但是思路上大致都是相同的。以往的区分方式是使用session id去匹配出不同的账号和角色，返回相应的展示，这个时候是由服务端去做的，也是根据url地址区分不同的页面，这是多页时代，随着react,angular和vue的兴起，单页应用越来越流行起来，这个时候就不能通过url地址去区分了，因为这个时候的单页应用是前后端分离的，后端不存在路由跳转了，后端只有接口了，所有的路由跳转都是通过前端来实现的，在前端中，前端拥有了自己的路由，也就是前端路由，前端路由去控制跳转，而这个跳转实际上不过是不同模块和组件的切换而已，这个切换的状态会展现在url地址栏当中，这个时候的url也就不同于过去的url了，这个时候的url不负责请求资源，只是作为跳转路径存在，而请求资源都是通过Ajax或者Fetch去实现。因此采用单页应用，由前端渲染的开发方式也就可以不需要使用session了，这时我们便通过Token令牌的方式去更好的实现权限区分(当然使用Token替代session主要原因并不是因为单页应用前端渲染，而是因为不再需要服务端维护session)，以往时跳转是在服务端实现的，但是现在是在客户端实现的。

### 实现思路

既然路由跳转是在客户端实现的，那么路由表自然也就是在客户端咯？？答案是，这也不一定。前端路由是一定要有的，只不过这时在实现上有区别，第一种:前端会保存一份完整的路由表，通过请求后端，由后端返回标志，前端去筛选这份完整的前端路由，找出想要的部分来当做该权限下的路由表使用。第二种：前端只保留基本路由，其他的路由，全部由后端动态的生成，然后传给前端。第一种方式在简单的场景下可以采用，这样不必占用过多的服务器资源，前端路由完全放在前端去维护，更加方便前端去更改，当然在面对复杂的权限管理时问题也会变的十分显著。第二种方式也就是我们所说的动态路由了，这种实现方式完全由后端动态生成返回给前端，前端根据这份路由表去实现权限控制。这时需要做的就是和后端约定好路由规则。。。未完待续。。。